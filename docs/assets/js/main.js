"use strict";const input=document.querySelector(".js-input"),submitBtn=document.querySelector(".js-submit"),resultList=document.querySelector(".js-results");let showList=[],showListPaintArr=[];const favoritesShows=[];let fav="";function searchShow(){fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(s=>s.json()).then(s=>{showList=s,paintSearchResult(),listenShowList()}).catch(function(s){console.log("Error al traer los datos del servidor",s)})}function paintSearchResult(){let s="";for(let t=0;t<showList.length;t++){s+=!0===(-1!==favoritesShows.indexOf(showList[t].show.id))?`<li class="js-showItem show__item--favorite" id=${showList[t].show.id} data-url="${showList[t].show.image.medium||showList[t].show.image.original}" data-name="${showList[t].show.name}">`:`<li class="js-showItem" id=${showList[t].show.id}>`,s+=`<h3>${showList[t].show.name}</h3>`,s+="<div>",!0==!!showList[t].show.image?s+=`<img src="${showList[t].show.image.medium||showList[t].show.image.original}" alt="imagen de ${showList[t].show.name}">`:s+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="imagen por defecto">',s+="</div>",s+="</li>",resultList.innerHTML=s}}function toggleFavorites(s){const t=parseInt(s.currentTarget.id),e=favoritesShows.findIndex(function(s,e){return s.id===t});if(!0===(-1!==e))favoritesShows.splice(e,1);else for(let s=0;s<showList.length;s++)showList[s].show.id===t&&favoritesShows.push(showList[s].show);console.log(e),console.log(favoritesShows)}function listenShowList(){showListPaintArr=document.querySelectorAll(".js-showItem");for(let s=0;s<showListPaintArr.length;s++)showListPaintArr[s].addEventListener("click",toggleFavorites)}function handler(s){s.preventDefault(),searchShow()}submitBtn.addEventListener("click",handler);